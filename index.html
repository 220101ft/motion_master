<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>恋ダンス 練習システム</title>
    <!-- Bootstrap5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">  
    <!-- CSS -->
    <link rel="stylesheet" href="./style/stylesheet.css">
    <!-- Script -->
    <script defer src="script.js"></script>
    <!-- Load TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <!-- Load Posenet -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/posenet"></script>

    <script>
      // ウィンドウのリサイズ時に動画とウェブカメラのサイズを調整する関数
      function resizeVideoContainers() {
        const videoContainers = document.getElementsByClassName('video-container');
        const windowHeight = window.innerHeight;
        const headerHeight = document.querySelector('h1').offsetHeight;
        const buttonHeight = document.querySelector('.text-center').offsetHeight;
        const maxHeight = windowHeight - headerHeight - buttonHeight - 40; // 適宜調整
    
        for (let i = 0; i < videoContainers.length; i++) {
          videoContainers[i].style.maxHeight = `${maxHeight}px`;
        }
      }
    
      // ウィンドウのリサイズイベントを監視して動画とウェブカメラのサイズを調整
      window.addEventListener('resize', resizeVideoContainers);
    
      // ページ読み込み時にも動画とウェブカメラのサイズを調整
      window.addEventListener('DOMContentLoaded', resizeVideoContainers);
    </script>
    
  </head>

  <body>
    <h1>剣道 練習システム</h1>

    <div id="score"></div>
    <div id="good"></div>

    <div class="container">
      <!-- 動画 -->
      <div class="col-md-5">
        <div class="video-container">
          <video class="video1" id="video1" src="images/video.mp4"></video>
        </div>
        <canvas class="canvas1" id="canvas1" width="560" height="50"></canvas>
      </div>

      <div class="col-md-2"></div>

      <!-- ウェブカメラ -->
      <div class="col-md-5">
        <div class="video-container">
          <video id="video2" autoplay muted></video>
        </div>
        <canvas id="canvas2" width="560" height="50"></canvas>
      </div>
    </div>

    <!-- STARTボタンとSTOPボタン -->
    <div class="text-center mt-4">
      <button id="start-button" class="btn btn-primary">START</button>
      <button id="stop-button" class="btn btn-danger">STOP</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
